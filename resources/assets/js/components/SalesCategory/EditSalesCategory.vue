<template>
    <div class="card">
        <div class="header">
            <h2>ADD NEW</h2>
        </div>
        <div class="body">
            <form id="form_advanced_validation" v-on:submit.prevent="updateSalesCategory" >
                <div class="form-group">
                    <div class="form-line error">
                        <input type="text" placeholder="Sales Category Name" class="form-control" v-model="sales_category.sales_category_name" maxlength="190" required="" aria-required="true" aria-invalid="true">
                        
                    </div>
                    <div class="help-info">Max. 190 characters</div>
                <label id="minmaxlength-error" class="error" for="minmaxlength" style="display: block;">This field is required.</label>
                </div>
                
                <div class="form-group">
                    <div class="form-line error">
                        <input type="number" placeholder="Commition (%)" class="form-control" v-model="sales_category.commition" required="" aria-required="true">
                    </div>
                    <div class="help-info">Numbers only</div>
                <label id="number-error" class="error" for="number">This field is required.</label>
                </div>

                <div class="form-group">
                    <div class="form-line error">
                        <input type="number" placeholder="Salary" class="form-control" v-model="sales_category.salary" required="" aria-required="true">
                    </div>
                    <div class="help-info">Numbers only</div>
                <label id="number-error" class="error" for="number">This field is required.</label>
                </div>
                
                <button class="btn btn-primary waves-effect" type="submit"><i class="material-icons">add_circle_outline</i> UPDATE CATEGORY</button>
                <router-link :to="{ name: 'SalesCategory' }" class="btn btn-default waves-effect" title="Back to Sales Category" >
                    BACK
                </router-link>
            </form>
        </div>
    </div>
</template>
<script>
    export default{
        data(){
            return{
                sales_category:{}
            }
        },
        created:function(){
            this.getSalesCategory();
        },
        methods:{
            getSalesCategory(){
                let uri = `/api/admin/sales-category/${this.$route.params.id}/edit`;
                this.axios.get(uri).then((response) => {
                    this.sales_category = response.data;
                });
            },
            updateSalesCategory(){
                let uri = '/api/admin/sales-category/'+this.$route.params.id;
                this.axios.patch(uri, this.sales_category).then((response) => {
                  this.$router.push({name: 'SalesCategory'});
                });
            }
        }
    }
</script>